- 모킹(Mocking) : 테스트를 최적화하기 위한 도구

- 모킹은 나쁜 프랙티스이며 최후의 수단으로만 사용해야 한다.
    - 이 책에서 권장하는 방식에 따라 모든 객체를 설계한다면 모킹은 전혀 필요하지 않다.
    - 객체와 의존 대상 사이의 상호작용 방식을 확인하거나 테스트해서는 안되며
    단위 테스트를 상호의존적으로 만듦으로써 리팩토링의 한계를 가져온다.
    - 모킹 대신 페이크 객체를 사용할 것을 권장하는 바이다.
    
- 모킹은 단위테스트를 지원하기 위해 만들어졌으나, 실제로 단위 테스트에 우호적이지 않다.
- 모킹은 클래스 구현과 관련된 내부의 세부사항을 테스트와 결합시킨다. 이 과정에서 우리는 가정하고 모의 객체 내부에 하드코딩한 채 작업을 끝낸다.
    - 시간이 흘러 리팩토링의 시점이 다가왔을 때 테스트는 더 이상 유효하지 않은 내부 구현과 결합되어 있기에 전에 구현한 테스트는 폐기처분할 수 밖에 없다.
    

---

```
interface Exchange {

    float rate(Stirng target);
    float rate(String origin, Sring target);

    final class Fake implements Exchange {
        @Override
        float rate(Stirng target) {
            return this.rate("USD", target);
        }
        @Override
        float rate(String origin, Sring target) {
            return 1.2345;
        }
    }

}

```

- 반대로 인터페이스 내 구현된 “페이크” 클래스의 경우 충분히 유지보수가 가능케 할 수 있습니다.

 

- “페이크” 클래스는 인터페이스의 설계에 관해 더 깊이 고민하도록 해주며 인터페이스를 설계하면서 
- 필연적으로 사용자의 관점에서도 고민하게 될 것이다. 인터페이스를 다양한 각도에서 바라보는 것이다.
