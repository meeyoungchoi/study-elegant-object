# 충성스러우면서 불변이거나 아니면 상수이거나

## 내용 정리

---
1. 객체의 불변성 <br>

* 불변성에 반대하는 사람들은 세상은 본질적으로 가변적이기 때문에 불변 객체만으로 세상을 표현하기란 불가능하다고 주장

* 세상은 가변적이지만, 그렇다고 해서 불변 객체로 세상을 모델링할 수 없는 것은 아님

* 혼란스러운 이유는 서로 다른 개념인 `상태(state)`와 `데이터(data)`에 관해 오해하고 있기 때문

* 객체의 불변은 `객체가 살아있는 동안 상태가 변하지 않는 다는 사실` 임

```java
/**
* WebPage는 불변일까 아니면 가변일까?
* 결론은 content() 메서드를 호출할 때마다 서로 다른 값이 반환되더라도 이 객체는 불변
* -> 객체의 해동이나 메서드의 반환값은 중요하지 않음
*/
class WebPage {
    private final URI uri;

    WebPage(URI path) {
        this.uri = path;
    }

    public String content() {
        // HTTP GET 요청을 전송해서,
        // 웹 페이지의 컨텐츠를 읽은 후,
        // 읽혀진 컨텐츠를 UTF-8 문자열로 변환
    }
}
```

* 사람들은 불변 객체의 메서드를 호출할 때마다 `상수(constant)`처럼 매번 동일한 데이터가 반환되리라 기대 <br>
=> 상수처럼 동작하는 객체는 단지 불변성의 특별한 경우(corner case)일 뿐임 <br>
=> 비록 content() 메서드의 결과를 예측할 수는 없더라고 WebPage는 불변 객체에 속함 <br>
=> 결과가 변하기 때문에 상수는 아니지만, 객체가 대표하는 엔티티에 `충성하기(loyal)` 때문에 불변 객체로 분류 <br>

* 불변 객체와 가변 객체의 차이는 불변 객체에는 식별자가 존재하지 않으며, 절대로 상태를 변경할 수 없음 <br>
=> 좀 더 정확하게 말해서 불변 객체의 식별자는 객체의 상태와 완전히 동일

*  불변 객체는 자신이 대표하는 실세계의 엔티티에게 `충성(loyal)`, 불변 객체는 엔티티의 좌표(객체의 상태)를 절대로 변경하지 않고 어떤 경우에도 항상 동일한 엔티티를 대표

<br>


## 느낀점
---
저자가 말하고자 하는 의미는 이해가 갔지만, 현업에서 경험해보지 않아 와닿지는 않았다. '객체지향적으로 생각하자'라는 생각을 가진 것도 최근이라, 아직 불변 객체를 깨달으려면 시간이 걸릴 것 같다. <br>

실제로 프로젝트에 잘 적용해서 해볼 수 있을까? 라는 의문도 든다. 어렵다.. 정말로 완벽하게  객체지향적으로 프로젝트를 진행할 수 있는 건가?
