# 절대 NULL을 반환하지 마세요

## 정리

``` java
public String title() {
  if (/* title이 없다면 */) {
    return null;
  }
  return "Elegant Objects";
}
```

- title()을 사용하는 클라이언트 코드에서 NPE를 던져질 수 있다.
- NULL은 신뢰를 앗아간다.
- 신뢰의 부족은 유지보수성의 손실로 이어진다.
  - 신뢰할 수 있는 메서드 호출이 어떤 것이고 NULL을 반환하는 메서드 호출이 어떤 것인지를 이해해야 한다.
  - 결과가 NULL이 아닌지를 중복으로 체크해야 한다.

### 빠르게 실패하기 vs. 안전하게 실패하기

**안전하게 실패하기**

- 버그, 입출력 문제, 메모리 오버플로우 등이 발생한 상황에서도 소프트웨어가 계속 실행될 수 있도록 최대한 많은 노력을 기울일 것을 권장한다.
- 이 상황을 구조하기 위해 노력한다.
- NULL을 반환하는 방법도 일종의 생존 기법이라 볼 수 있다.

**빠르게 실패하기**

- 일단 문제가 발생하면 곧바로 실행을 중단하고 최대한 빨리 예외를 던진다.
- 상황을 구조하지 않는 대신, 실패를 분명하게 만든다.
- 실패를 감추는 대신 강조하기 때문에 눈에 잘 띄게 만들고 추적하기 쉽게 만든다.

### NULL의 대안

**메서드 나누기**

- 존재 여부 확인하는 메서드와 실제 객체를 반환하는 메서드 분리한다.
- 요청을 두 번 보내기 때문에 비효율적이다.

**컬렉션**

- 객체를 추출하기 위해 어떤 식으로든 컬렉션에 접근해야 한다.

**널 객체**

- 겉으로는 원래의 객체처럼 보이지만 실제로는 다르게 행동하는 객체를 반환한다.
- 객체지향적인 사고방식과 어울리지만, 제한된 상황에서만 사용 가능하다.
- 반환된 객체의 타입을 동일하게 유지해야 한다.

## 느낀점

나 역시 빠르게 실패하기를 지향하는 저자와 같은 의견이다. null 체크 로직을 호출하는 부분에서 처리하게 되면 실수로 빼먹거나 잘못된 처리를 하여 당황했던 경험이 있었다. 그렇기에 안전하게 실패하기는 해서는 안된다고 생각한다.

하지만 Optional과 null객체에 대한 부분이 이해가 되지 않는다. 저자는 Optional을 사용하지 말라고 하는데 null 객체 또한 봉투라고 생각이 든다. 둘의 정확한 차이점을 잘 모르겠다. Optional은 NPE를 방지할 수 있는 좋은 도구라고 생각한다. 필요한 곳에 적절히 사용하면 훨씬 유연한 코드를 구사할 수 있을 것 같다.